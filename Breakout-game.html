<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Break-it-out</title>
</head>
<body>
    <canvas height="500" width="500" id="ctx" style="border: 2px solid black;"></canvas>
    <script>

        var ctx = document.getElementById('ctx').getContext('2d')
        ctx.font = '20px Calibri';
        const width = 500;
        const height = 500;

        var ball = {
            x:0,
            y:0,
            radius:5,
            color: 'blue',
            spdX: -5,
            spdY: -5
        }

        var base = {
            x:0,
            y:400,
            height:20,
            width:100,
            color:'red',
            pressingLeft: false,
            pressingRight: false
        }

        document.onkeydown = function(event){
            if(event.keyCode == 37) {
                base.pressingLeft = true;
                base.pressingRight = false;
            }
            else if(event.keyCode == 39) {
                base.pressingLeft = false;
                base.pressingRight = true;
            }
        }

        document.onkeyup = function(event) {
            if(event.keyCode == 37) {
                base.pressingLeft = false;
            }
            else if(event.keyCode == 39) {
                base.pressingRight = false;
            }
        }


        drawBall = function() {
            ctx.save();
            ctx.fillStyle = ball.color;
            ctx.beginPath();
            ctx.arc(ball.x,ball.y,ball.radius,0,2*Math.PI);
            ctx.fill();
            ctx.restore();
        }

        drawBase = function() {
            ctx.save();
            ctx.fillStyle = base.color;
            ctx.fillRect(base.x,base.y,base.width,base.height);
            ctx.restore();
        }

        updateBasePosition = function() {
            if(base.pressingLeft) {
                base.x = base.x -5;
            }
            else if(base.pressingRight) {
                base.x = base.x + 5;
            }
            if(base.x<0){
                base.x = 0
            }
            if(base.x > width - base.width) {
                base.x = width - base.width;
            }
        }

        updateBallPosition = function() {
            ball.x += ball.spdX;
            ball.y += ball.spdY;
            if(ball.x> width || ball.x<0){
                ball.spdX = -ball.spdX;
            }
            else if(ball.y>height || ball.y<0){
                ball.spdY = -ball.spdY;
            }
        }

        update = function() {
            ctx.clearRect(0,0,width,height);
            updateBasePosition();
            updateBallPosition();
            drawBall();
            drawBase();
        }

        startGame = function() {
            base.x = 150;
            ball.x = base.x +100;
            ball.y = base.y -100;
            setInterval(update,20);
        }

        startGame();


    </script>
</body>
</html>